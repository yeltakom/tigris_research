<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Etkileşimli Mapbox Haritası</title>
    <!-- Mapbox GL JS CSS -->
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet">
    <!-- Özel CSS -->
    <style>
        /* Harita konteyner boyutu */
        #map {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 100%;
        }

        /* Pop-up içerik stili */
        .popup-content {
            max-width: 200px;
        }

        .popup-image {
            width: 100%;
            height: auto;
        }

        /* Responsive ayarlar */
        @media (max-width: 600px) {
            .popup-content {
                max-width: 150px;
            }
        }
    </style>
</head>
<body>

    <!-- Harita Konteyneri -->
    <div id="map"></div>

    <!-- Mapbox GL JS -->
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
    <!-- Özel JavaScript -->
    <script>
        // Mapbox erişim tokeninizi ayarlayın
        mapboxgl.accessToken = 'pk.eyJ1IjoieWVsdGFrb20iLCJhIjoidG93ZmpycyJ9.OmdsZ72J67CAQR9tFm8_Nw';

        // Haritayı başlat
        var map = new mapboxgl.Map({
            container: 'map', // Konteyner ID
            style: 'mapbox://styles/mapbox/streets-v11', // Harita stili
            center: [41.4110, 37.7151], // Başlangıç merkezi (Hasankeyf koordinatları)
            zoom: 12 // Başlangıç zoom seviyesi
        });

        // Marker verileri
        var locations = [
            // 20 adet nokta örneği
            {
                coordinates: [41.4110, 37.7151],
                title: 'Nokta 1',
                description: 'Nokta 1 açıklaması.',
                image: 'https://via.placeholder.com/150'
            },
            {
                coordinates: [41.4120, 37.7160],
                title: 'Nokta 2',
                description: 'Nokta 2 açıklaması.',
                image: 'https://via.placeholder.com/150'
            },
            {
                coordinates: [41.4100, 37.7140],
                title: 'Nokta 3',
                description: 'Nokta 3 açıklaması.',
                image: 'https://via.placeholder.com/150'
            },
            // Diğer noktaları ekleyin...
        ];

        // Örnek olarak 20 nokta oluşturuyoruz
        for (var i = 4; i <= 20; i++) {
            locations.push({
                coordinates: [
                    41.4110 + (Math.random() - 0.5) * 0.02, // Longitude
                    37.7151 + (Math.random() - 0.5) * 0.02  // Latitude
                ],
                title: 'Nokta ' + i,
                description: 'Nokta ' + i + ' açıklaması.',
                image: 'https://via.placeholder.com/150'
            });
        }

        // Markerları haritaya ekleyin
        locations.forEach(function(location) {
            // Her bir marker için DOM elemanı oluştur
            var el = document.createElement('div');
            el.className = 'marker';

            // Marker oluştur ve haritaya ekle
            var marker = new mapboxgl.Marker(el)
                .setLngLat(location.coordinates)
                .addTo(map);

            // Pop-up içeriği oluştur
            var popupContent = document.createElement('div');
            popupContent.className = 'popup-content';

            var popupTitle = document.createElement('h3');
            popupTitle.textContent = location.title;
            popupContent.appendChild(popupTitle);

            var popupDescription = document.createElement('p');
            popupDescription.textContent = location.description;
            popupContent.appendChild(popupDescription);

            var popupImage = document.createElement('img');
            popupImage.src = location.image;
            popupImage.className = 'popup-image';
            popupContent.appendChild(popupImage);

            // Pop-up oluştur
            var popup = new mapboxgl.Popup({ offset: 25 })
                .setDOMContent(popupContent);

            // Marker tıklama etkinliği
            marker.getElement().addEventListener('click', function() {
                // Konuma yakınlaştır
                map.flyTo({
                    center: location.coordinates,
                    zoom: 14,
                    essential: true
                });

                // Pop-up'ı aç
                popup.setLngLat(location.coordinates)
                    .addTo(map);
            });
        });

        // Pencere boyutu değiştiğinde haritayı yeniden boyutlandır
        window.addEventListener('resize', function() {
            map.resize();
        });
    </script>
</body>
</html>
